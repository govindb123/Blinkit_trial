<div class="deliveries-container">
  <div class="deliveries-card">
    <div class="dashboard-header">
      <h2 class="deliveries-title">ğŸš´ Rider Dashboard</h2>
      <%= link_to "ğŸ  Home", root_path, class: "home-btn" %>
    </div>
    
    <!-- Three Column Layout -->
    <div class="deliveries-columns">
      
      <!-- Column 1: Available Orders -->
      <div class="deliveries-column">
        <h3 class="column-title available-title">ğŸ“¦ Available Orders</h3>
        <% if @available_orders.any? %>
          <% @available_orders.each do |order| %>
            <div class="order-card available-card">
              <div class="new-badge">NEW</div>
              <div class="order-id">
                <%= link_to "Order ##{order.id}", delivery_path(order), class: "order-id" %>
              </div>
              <div class="order-address">ğŸ“ <%= order.address %></div>
              <div class="order-item available-item">ğŸ›ï¸ <%= order.order_items.first&.item&.name %> (Qty: <%= order.order_items.first&.quantity %>) - <span class="item-price">â‚¹<%= order.order_items.first&.item&.price %></span></div>
              <div class="order-total">Total: â‚¹<%= order.order_items.sum { |oi| oi.quantity * oi.item.price } %></div>
              <%= form_with url: assign_delivery_path(order), method: :patch, local: true do |f| %>
                <%= f.submit "ğŸš€ Assign", class: "btn-assign" %>
              <% end %>
            </div>
          <% end %>
        <% else %>
          <div class="empty-state empty-available">
            <div class="empty-icon">ğŸ“­</div>
            <p class="empty-text">No available orders</p>
          </div>
        <% end %>
      </div>

      <!-- Column 2: My Assigned Orders -->
      <div class="deliveries-column">
        <h3 class="column-title assigned-title">ğŸšš My Assigned Orders</h3>
        <% if @my_assigned_orders.any? %>
          <% @my_assigned_orders.each do |order| %>
            <div class="order-card assigned-card">
              <div class="status-badge"><%= order.status_display %></div>
              <div class="order-content">
                <div class="order-id">
                  <%= link_to "Order ##{order.id}", delivery_path(order), class: "order-id" %>
                </div>
                <div class="order-address">ğŸ“ <%= order.address %></div>
                <div class="order-item assigned-item">ğŸ›ï¸ <%= order.order_items.first&.item&.name %> (Qty: <%= order.order_items.first&.quantity %>) - <span class="item-price">â‚¹<%= order.order_items.first&.item&.price %></span></div>
                <div class="order-total">Total: â‚¹<%= order.order_items.sum { |oi| oi.quantity * oi.item.price } %></div>
                
                <% case order.status %>
                <% when "assigned" %>
                  <%= button_to "ğŸ“¦ Pick Up", pickup_delivery_path(order), method: :patch, class: "btn-pickup" %>
                <% when "picked_up" %>
                  <%= button_to "ğŸš€ Start Delivery", start_delivery_delivery_path(order), method: :patch, class: "btn-start" %>
                <% when "in_transit" %>
                  <%= button_to "ğŸ“ Nearby", nearby_delivery_path(order), method: :patch, class: "btn-nearby" %>
                <% when "nearby" %>
                  <%= button_to "âœ… Deliver", delivery_path(order), method: :put, class: "btn-deliver" %>
                <% end %>
              </div>
            </div>
          <% end %>
        <% else %>
          <div class="empty-state empty-assigned">
            <div class="empty-icon">ğŸ“‹</div>
            <p class="empty-text">No assigned orders</p>
          </div>
        <% end %>
      </div>

      <!-- Column 3: Completed Deliveries -->
      <div class="deliveries-column">
        <h3 class="column-title completed-title">âœ… Completed Deliveries</h3>
        <% if @delivered_orders.any? %>
          <% @delivered_orders.each do |order| %>
            <div class="order-card completed-card">
              <div class="status-badge done-badge">âœ… DONE</div>
              <div class="order-content">
                <div class="order-id">
                  <%= link_to "Order ##{order.id}", delivery_path(order), class: "order-id" %>
                </div>
                <div class="order-address">ğŸ“ <%= order.address %></div>
                <div class="order-item completed-item">ğŸ›ï¸ <%= order.order_items.first&.item&.name %> - <span class="item-price">â‚¹<%= order.order_items.first&.item&.price %></span></div>
                <div class="order-total">Total: â‚¹<%= order.order_items.sum { |oi| oi.quantity * oi.item.price } %></div>
                <div class="completed-checkmark">âœ…</div>
              </div>
            </div>
          <% end %>
        <% else %>
          <div class="empty-state empty-completed">
            <div class="empty-icon">ğŸ“¦</div>
            <p class="empty-text">No deliveries yet</p>
          </div>
        <% end %>
      </div>
      
    </div>
  </div>
</div>